<div class="container">
  <header class="header" id="header">
    <figure>
        <img src="assets/logo2.png" alt="" height="60">
    </figure>
    <div>
        <!-- <div class="shop-icon">
            <i class='bx bx-cart' style='color:#ffffff; font-size:1.2rem'></i>
        </div> -->
    </div>
  </header>
  <section style="margin-top: 100px;">
    <header class="text-center">
      <h2>Formulario para env&iacute;os</h2>
      <p>Solo falta este paso para alistar tu pedido, por favor, llena todos los campos para que el env&iacute;o sea exitoso :)</p>
    </header>
      <form class="form" [formGroup]="userForm">
          <div class="form-group">
            <label for="username">Nombre de usuario de instagram</label>
            <input type="text" formControlName="username" class="form-control" id="username" aria-describedby="usernameHelp" placeholder="Ingresa tu nombre de usuario">
            <small id="usernameHelp" class="form-text text-muted">Solo lo usaremos para ubicar tu pedido</small>
          </div>
          <div class="form-group">
            <label for="document-id">N&uacute;mero de DNI o CE</label>
            <input type="text" formControlName="documentNumber" class="form-control" id="document-id" aria-describedby="documentError" placeholder="Documento de identidad">
            <small id="documentError" *ngIf="formControlError('documentNumber')" style="color:red;" class="form-text">Debe tener m&iacute;nimo 8 d&iacute;gitos</small>
          </div>
          <div class="form-group">
            <label for="full-name">Nombres y apellidos de quien recibe</label>
            <input type="text" formControlName="fullname" class="form-control" id="full-name" placeholder="Ingresa tu nombre">
          </div>
          <div class="form-group">
            <label for="courier">Selecciona tu courier</label>
            <select class="form-select" id="courier" formControlName="courier" (click)="selectCourier()">
              <option value="null" selected>Selecciona una opci&oacute;n</option>
              <option value="olva-domicilio">Olva (Env&iacute;o a domicilio)</option>
              <option value="olva-agencia">Olva (Recojo en agencia)</option>
              <option value="shalom">Shalom</option>
            </select>
          </div>
          <div class="form-group" *ngIf="isOlvaCourier">
            <label for="phone">N&uacute;mero de contacto</label>
            <input type="text" formControlName="phone" class="form-control" id="phone" placeholder="Ejemplo: 963852741" aria-describedby="phoneHelp">
            <small id="phoneHelp" class="form-text text-muted">Solo se usar&aacute; para que el courier se comunique contigo</small>
          </div>
          <section *ngIf="userForm.get('courier')?.value === 'olva-agencia'">
            <div class="form-group">
              <label for="agencyOlva">Ingresa tu agencia</label>
              <input type="text" formControlName="agency" class="form-control" id="agencyOlva" placeholder="Ejemplo: agencia lima - puente piedra - zapallal" aria-describedby="agencyOlvahelp">
              <small id="agencyOlvahelp" class="form-text text-muted">Ingresa a <a href="https://www.olvacourier.com/nuestras-oficinas/" target="_blank">https://www.olvacourier.com/nuestras-oficinas/</a> y ubica tu agencia mas cercana  </small>
            </div>
          </section>
          <section *ngIf="userForm.get('courier')?.value === 'olva-domicilio'">
            <div class="form-group">
              <label for="district">Ingresa tu distrito</label>
              <input type="text" formControlName="district" class="form-control" id="district" placeholder="Ejemplo: lima - lima - san miguel" aria-describedby="districtHelp">
              <small id="districtHelp" class="form-text text-muted">departamento - provincia - distrito </small>
            </div>
            <div class="form-group">
              <label for="address">Ingresa tu direcci&oacute;n</label>
              <input type="text" formControlName="address" class="form-control" id="address" placeholder="Ejemplo: Av. faucett 356" aria-describedby="addressHelp">
            </div>
            <div class="form-group">
              <label for="reference">Ingresa una referencia (e indicaciones)</label>
              <input type="text" formControlName="reference" class="form-control" id="reference" placeholder="Ejemplo: Al costado del parque bicentenario, dpto 380, dejar en porteria" aria-describedby="addressHelp">
            </div>
          </section>
          <section *ngIf="userForm.get('courier')?.value === 'shalom'">
            <div class="form-group">
              <label for="agency">Agencia Shalom <b>(Ingresar al link)</b></label>
              <input type="text" formControlName="agency" class="form-control" id="agency" placeholder="Ejemplo: agencia lima - puente piedra - zapallal" aria-describedby="agencyHelp">
              <small id="agencyHelp" class="form-text text-muted">Ingresa a <a href="https://agencias.shalom.pe/" target="_blank">https://agencias.shalom.pe/</a> y ubica tu agencia mas cercana </small>
            </div>
          </section>
          <section class="mx-auto mb-4">
            <button type="submit" class="btn btn-primary w-100" style="background-color: #9F89C1 !important; border-color: #9F89C1 !important" [disabled]="userForm.invalid" (click)="sendForm()">Enviar</button>
          </section>
      </form>
  </section>
</div>
<ng-template #sucessModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Datos enviados correctamente</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p>Hemos registrado correctamente tus datos, te mostramos un resumen
    </p>
    <div>
        <span *ngIf="userForm.get('username')?.value !== null"><b>Username: </b>{{userForm.get('username')?.value}}<br></span>
        <span *ngIf="userForm.get('documentNumber')?.value !== null"><b>DNI: </b>{{userForm.get('documentNumber')?.value}}<br></span>
        <span *ngIf="userForm.get('fullname')?.value !== null"><b>Nombre completo: </b>{{userForm.get('fullname')?.value}}<br></span>
        <span *ngIf="userForm.get('courier')?.value !== null"><b>Courier: </b>{{userForm.get('courier')?.value}}<br></span>
        <span *ngIf="userForm.get('district')?.value !== null"><b>Distrito: </b>{{userForm.get('district')?.value}}<br></span>
        <span *ngIf="userForm.get('address')?.value !== null"><b>Direccion: </b>{{userForm.get('address')?.value}}<br></span>
        <span *ngIf="userForm.get('phone')?.value !== null"><b>Telefono: </b>{{userForm.get('phone')?.value}}<br></span>
        <span *ngIf="userForm.get('reference')?.value !== null"><b>Refrencia: </b>{{userForm.get('reference')?.value}}<br></span>
        <span *ngIf="userForm.get('agency')?.value !== null"><b>Agency: </b>{{userForm.get('agency')?.value}}<br></span>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="goToCatalog()">Entendido</button>
  </div>
</ng-template>
<ng-template #errorModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Ha ocurrido un error</h4>
    <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <p>Por favor, notificanos del error e intenta de nuevo en unos minutos.
    </p>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="d('Cross click')">Entendido</button>
  </div>
</ng-template>